<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>phantomliu&#39;s blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-01-21T03:35:12.762Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>phantomliu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2018/01/20/hello-world/"/>
    <id>http://yoursite.com/2018/01/20/hello-world/</id>
    <published>2018-01-20T07:15:13.969Z</published>
    <updated>2018-01-21T03:35:12.762Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>知乎爬虫</title>
    <link href="http://yoursite.com/2018/01/20/zhihu-crawler/"/>
    <id>http://yoursite.com/2018/01/20/zhihu-crawler/</id>
    <published>2018-01-20T07:08:32.000Z</published>
    <updated>2018-01-21T03:35:20.875Z</updated>
    
    <content type="html"><![CDATA[<p>zhihu-crawler是一个基于Java的爬虫实战项目，主要功能是抓取知乎用户的基本资料，如果觉得不错，请给个star。</p><h2 id="爬取结果"><a href="#爬取结果" class="headerlink" title="爬取结果"></a>爬取结果</h2><ul><li>下图为爬取117w知乎用户数据的简单统计<br><br><img src="https://raw.githubusercontent.com/wycm/zhihu-crawler/2.0/src/main/resources/img/zhihu-charts.png" alt=""></li><li>详细统计见 <a href="https://www.vwycm.cn/zhihu/charts" target="_blank" rel="noopener">https://www.vwycm.cn/zhihu/charts</a></li></ul><h2 id="工程导入-maven"><a href="#工程导入-maven" class="headerlink" title="工程导入(maven)"></a>工程导入(maven)</h2><ul><li>git clone <a href="https://github.com/wycm/zhihu-crawler" target="_blank" rel="noopener">https://github.com/wycm/zhihu-crawler</a> 克隆项目到本地</li><li><strong>eclipse</strong>导入步骤(eclipse_kepler版本，自带maven)，File-&gt;Import-&gt;Maven-&gt;Existing Maven Projects-&gt;选择刚刚clone的zhihu-crawler目录-&gt;导入成功</li><li><strong>idea</strong>导入步骤,File-&gt;Open-&gt;选择刚刚clone的zhihu-crawler目录-&gt;导入成功</li></ul><h2 id="工程导入-不使用maven"><a href="#工程导入-不使用maven" class="headerlink" title="工程导入(不使用maven)"></a>工程导入(不使用maven)</h2><ul><li>eclipse或myeclipse都可以</li><li>git clone <a href="https://github.com/wycm/zhihu-crawler" target="_blank" rel="noopener">https://github.com/wycm/zhihu-crawler</a> 克隆项目到本地</li><li>创建一个名字为zhihu-new-crawler（这个随便命名）的普通工程</li><li>拷贝刚刚clone的zhihu-crawler/src/main/java/com目录到zhihu-new-crawler/src目录下</li><li>右键工程-&gt;Build Path-&gt;Add External Archives…-&gt;导入zhihu-crawler/lib下的所有jar包</li><li>将zhihu-crawler/src/main/resources目录下的<a href="https://github.com/wycm/zhihu-crawler/blob/2.0/src/main/resources/config.properties" target="_blank" rel="noopener">config.properties</a>和<a href="https://github.com/wycm/zhihu-crawler/blob/2.0/src/main/resources/log4j.properties" target="_blank" rel="noopener">log4j.properties</a>拷贝至src目录下</li></ul><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><p>Run with <a href="https://github.com/wycm/zhihu-crawler/blob/2.0/src/main/java/com/crawl/Main.java" target="_blank" rel="noopener">Main.java</a> <br></p><h2 id="使用到的API"><a href="#使用到的API" class="headerlink" title="使用到的API"></a>使用到的API</h2><ul><li><p>地址(url)：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">* 请求类型：GET</span><br><span class="line">* **请求参数**</span><br><span class="line"></span><br><span class="line">| 参数名 |类型 | 必填 | 值 | 说明|</span><br><span class="line">| :------------ | :------------ | :------------ | :----- | :------------ |</span><br><span class="line">| include | String | 是| ```data[*]answer_count,articles_count``` |需要返回的字段（这个值可以改根据需要增加一些字段，见如下示例url） |</span><br><span class="line">| offset  | int    | 是| 0 | 偏移量（通过调整这个值可以获取到一个用户的```所有关注用户```资料） |</span><br><span class="line">| limit   | int    | 是| 20 | 返回用户数（最大20，超过20无效） |</span><br><span class="line"></span><br><span class="line">* url示例：```https://www.zhihu.com/api/v4/members/wo-yan-chen-mo/followees?include=data[*].educations,employments,answer_count,business,locations,articles_count,follower_count,gender,following_count,question_count,voteup_count,thanked_count,is_followed,is_following,badge[?(type=best_answerer)].topics&amp;offset=0&amp;limit=20</span><br></pre></td></tr></table></figure></p></li><li><p>响应：json数据，会有关注用户资料</p></li><li><strong>注意</strong>：这个请求采用了oauth验证，需要在http header加上<code>authorization:oauth c3cef7c66a1843f8b3a9e6a1e3160e20</code>,这个值是存放在js文件中，详细获取方式见代码。</li></ul><h2 id="使用到的三方库"><a href="#使用到的三方库" class="headerlink" title="使用到的三方库"></a>使用到的三方库</h2><ul><li>HttpClient4.5-网络请求</li><li>Jsoup-html标签解析</li><li>JsonPath-json数据解析</li></ul><h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><ul><li>大量使用http代理，突破同一个客户端访问量限制。</li><li>支持持久化(mysql),相关配置见<a href="https://github.com/wycm/zhihu-crawler/blob/2.0/src/main/resources/config.properties" target="_blank" rel="noopener">config.properties</a>。</li><li>多线程、爬取速度快。</li></ul><h2 id="持久化配置"><a href="#持久化配置" class="headerlink" title="持久化配置"></a>持久化配置</h2><ul><li>如果要持久化数据到mysql，先手动创建数据库，然后修改配置文件<a href="https://github.com/wycm/zhihu-crawler/blob/2.0/src/main/resources/config.properties" target="_blank" rel="noopener">config.properties</a>的如下属性。</li><li><code>db.enable = true</code></li><li><code>db.host =ip地址</code></li><li><code>db.username = 用户名</code></li><li><code>db.password = 密码</code></li><li><code>db.name = 数据库名</code></li></ul><h2 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h2><p><img src="https://raw.githubusercontent.com/wycm/zhihu-crawler/2.0/src/main/resources/img/zhihu-crawler-process.jpg" alt=""></p><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><h4 id="2016-12-26"><a href="#2016-12-26" class="headerlink" title="2016.12.26"></a>2016.12.26</h4><ul><li>移除未使用的包，修复ConcurrentModificationException和NoSuchElementException异常问题。</li><li>增加游客（免登录）模式抓取。</li><li>增加代理抓取模块。</li></ul><h4 id="2017-01-10"><a href="#2017-01-10" class="headerlink" title="2017.01.10"></a>2017.01.10</h4><ul><li>不再采用登录抓取，并移除登录抓取相关模块，模拟登录的主要逻辑代码见<a href="https://github.com/wycm/zhihu-crawler/blob/2.0/src/main/java/com/crawl/zhihu/ModelLogin.java" target="_blank" rel="noopener">ModelLogin.java</a>。</li><li>优化项目结构，加快爬取速度。采用ListPageThreadPool和DetailPageThreadPool两个线程池。ListPageThreadPool负责下载”关注用户“列表页，解析出关注用户，将关注用户的url去重，然后放到DetailPageThreadPool线程池。<br>DetailPageThreadPool负责下载用户详情页面，解析出用户基本信息并入库，获取该用户的”关注用户”的列表页url并放到ListPageThreadPool。</li></ul><h4 id="2017-01-17"><a href="#2017-01-17" class="headerlink" title="2017.01.17"></a>2017.01.17</h4><ul><li>增加代理序列化。</li><li>调整项目结构，大幅度提高爬取速度。不再使用ListPageThreadPool和DetailPageThreadPool的方式。直接下载关注列表页，可以直接获取到用户详细资料。</li></ul><h4 id="2017-03-30"><a href="#2017-03-30" class="headerlink" title="2017.03.30"></a>2017.03.30</h4><ul><li>知乎api变更，关注列表页不能获取到关注人数，导致线程池任务不能持续下去。抓取模式切换成原来ListPageThreadPool和DetailPageThreadPool的方式。</li></ul><h4 id="2017-05-26"><a href="#2017-05-26" class="headerlink" title="2017.05.26"></a>2017.05.26</h4><ul><li>修复代理返回错误数据，导致java.lang.reflect.UndeclaredThrowableException异常。</li></ul><h4 id="2017-11-05"><a href="#2017-11-05" class="headerlink" title="2017.11.05"></a>2017.11.05</h4><ul><li>知乎authorization文件更新，修改authorization获取方式。<h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2></li><li>优化爬取速度</li></ul><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><ul><li>想要爬取其它数据，如问题、答案等，完全可以在此基础上自己定制。</li><li>有问题的请提issue。</li><li>欢迎贡献代码。</li><li>爬虫交流群：633925314，欢迎交流。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;zhihu-crawler是一个基于Java的爬虫实战项目，主要功能是抓取知乎用户的基本资料，如果觉得不错，请给个star。&lt;/p&gt;
&lt;h2 id=&quot;爬取结果&quot;&gt;&lt;a href=&quot;#爬取结果&quot; class=&quot;headerlink&quot; title=&quot;爬取结果&quot;&gt;&lt;/a&gt;爬取结果
      
    
    </summary>
    
      <category term="github" scheme="http://yoursite.com/categories/github/"/>
    
    
      <category term="black magic" scheme="http://yoursite.com/tags/black-magic/"/>
    
      <category term="fucking trick" scheme="http://yoursite.com/tags/fucking-trick/"/>
    
  </entry>
  
  <entry>
    <title>基础框架-Maven模块化</title>
    <link href="http://yoursite.com/2018/01/20/frame-modular/"/>
    <id>http://yoursite.com/2018/01/20/frame-modular/</id>
    <published>2018-01-20T07:08:32.000Z</published>
    <updated>2018-01-21T08:03:21.768Z</updated>
    
    <content type="html"><![CDATA[<h2 id="IDE设置"><a href="#IDE设置" class="headerlink" title="IDE设置"></a>IDE设置</h2><ol><li>git clone 代码</li><li><code>mvn install</code></li><li>在工作目录中使用<code>mvn eclipse:eclipse</code>[Eclipse]或<code>mvn idea:idea</code>[Intellij IDEA]初始化工程</li><li>在IDE中导入已有工程</li></ol><h2 id="打包与运行"><a href="#打包与运行" class="headerlink" title="打包与运行"></a>打包与运行</h2><ul><li><p>打包jar<br>命令：<code>mvn package -P dev</code>[开发环境配置]，<code>mvn package -P online</code>[生产环境配置]<br><br>其中，开发环境dev的配置位于<code>src/main/resources/dev</code>中，生产环境online的配置位于<code>src/main/resources/online</code>中<br><br>默认为dev开发环境的配置</p></li><li><p>运行<br>其中<code>datadriver-web</code>中是war包，该包中包含有其他模块的jar在lib目录中</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;IDE设置&quot;&gt;&lt;a href=&quot;#IDE设置&quot; class=&quot;headerlink&quot; title=&quot;IDE设置&quot;&gt;&lt;/a&gt;IDE设置&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;git clone 代码&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mvn install&lt;/code&gt;&lt;/li&gt;

      
    
    </summary>
    
      <category term="Datadriver" scheme="http://yoursite.com/categories/Datadriver/"/>
    
    
      <category term="black magic" scheme="http://yoursite.com/tags/black-magic/"/>
    
      <category term="fucking trick" scheme="http://yoursite.com/tags/fucking-trick/"/>
    
  </entry>
  
</feed>
